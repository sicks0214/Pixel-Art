# ========================================
# Site2 - 像素画转换器环境变量配置
# ========================================
# 复制此文件为 .env 并填入实际值

# ========================================
# 基础配置（⭐ 必需）
# ========================================

# 运行环境
NODE_ENV=production

# 服务端口（容器内部端口）
PORT=3001

# 时区配置（使用IANA时区名称）
TZ=America/New_York

# ========================================
# CORS 跨域配置（⭐ 必需）
# ========================================

# 多域名CORS支持（逗号分隔，无空格）
# 包含主域名、www子域名、其他子域名
ALLOWED_ORIGINS=https://pixelartland.cc,https://www.pixelartland.cc

# 单域名前端URL（降级方案）
FRONTEND_URL=https://pixelartland.cc

# Vercel部署URL（如使用Vercel）
VERCEL_FRONTEND_URL=

# ========================================
# 图像处理配置
# ========================================

# 最大文件大小（字节，默认10MB）
MAX_FILE_SIZE=10485760

# 最大图像尺寸（像素）
MAX_IMAGE_WIDTH=8000
MAX_IMAGE_HEIGHT=8000

# 支持的图像格式
SUPPORTED_FORMATS=image/png,image/jpeg,image/jpg,image/webp

# ========================================
# API 配置
# ========================================

# API 速率限制
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# 请求超时（毫秒）
REQUEST_TIMEOUT=30000

# ========================================
# Redis 缓存配置（可选）
# ========================================

# 是否启用 Redis 缓存
ENABLE_REDIS_CACHE=false
CACHE_ENABLED=false

# Redis 连接URL（如启用缓存）
REDIS_URL=redis://redis:6379

# 缓存TTL（秒）
CACHE_TTL=3600

# ========================================
# PostgreSQL总系统接入（可选）
# ========================================
# 如需接入PostgreSQL总系统，取消注释并配置

# PostgreSQL 连接配置
# 注意：使用容器名 postgres_master，不要使用IP地址
# DB_HOST=postgres_master
# DB_PORT=5432
# DB_USER=site2_user
# DB_PASSWORD=your-secure-password-here
# DB_NAME=postgres

# 数据库连接池配置
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# ========================================
# 安全配置（可选）
# ========================================

# JWT密钥（如需要认证）
# JWT_SECRET=your-super-secret-jwt-key

# API密钥（如需要）
# API_KEY=your-api-key

# ========================================
# 日志配置
# ========================================

# 日志级别（error/warn/info/debug）
LOG_LEVEL=info

# 是否启用详细日志
VERBOSE_LOGGING=false

# ========================================
# 监控配置
# ========================================

# 健康检查路径
HEALTH_CHECK_PATH=/api/health

# Sentry DSN（错误监控，可选）
# SENTRY_DSN=

# ========================================
# 部署平台配置
# ========================================

# Railway 配置（如使用 Railway）
# RAILWAY_ENVIRONMENT_NAME=
# RAILWAY_PROJECT_ID=

# Vercel 配置（如使用 Vercel Serverless）
# VERCEL=

# ========================================
# 功能开关
# ========================================

# 是否启用模拟模式（开发调试用）
ENABLE_MOCK_MODE=false

# 是否启用性能监控
ENABLE_PERFORMANCE_MONITORING=true

# 是否启用详细错误信息（仅开发环境）
SHOW_ERROR_DETAILS=false

# ========================================
# 部署说明
# ========================================

# 1. 复制此文件为 .env
#    cp env.example.new .env
#
# 2. 修改必需的配置项（标记⭐的部分）
#    - ALLOWED_ORIGINS: 填入实际域名
#    - TZ: 确认时区正确
#
# 3. 如需数据库，取消注释PostgreSQL配置部分
#
# 4. 设置文件权限
#    chmod 600 .env
#
# 5. 重启容器使配置生效
#    docker restart site2

