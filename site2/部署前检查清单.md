# âœ… VPSéƒ¨ç½²å‰æ£€æŸ¥æ¸…å• - pixelartland.cc

## ğŸ“‹ æœ¬åœ°å‡†å¤‡ï¼ˆéƒ¨ç½²å‰ï¼‰

### ä»£ç æ£€æŸ¥
- [x] **é»˜è®¤è¯­è¨€å·²è®¾ç½®ä¸ºè‹±è¯­**
  - `frontend/src/i18n/core/I18nManager.ts` â†’ `defaultLocale: 'en'` âœ…
  
- [x] **SEOæè¿°å·²ä¼˜åŒ–**
  - `frontend/index.html` â†’ Meta description: 142å­—ç¬¦ âœ…
  - `frontend/src/components/SEO.tsx` â†’ æè¿°å·²æ›´æ–° âœ…

- [x] **CORSæ”¯æŒå¤šåŸŸå**
  - `backend/src/index.ts` â†’ `ALLOWED_ORIGINS` ç¯å¢ƒå˜é‡æ”¯æŒ âœ…

- [x] **Dockerfileç¬¦åˆæŒ‡å—**
  - `backend/Dockerfile.simple` â†’ å•é˜¶æ®µæ„å»º âœ…
  - æ—¶åŒº: `TZ=America/New_York` âœ…
  - å¥åº·æ£€æŸ¥: å·²é…ç½® âœ…

- [x] **æ„å»ºè„šæœ¬å°±ç»ª**
  - `build-frontend.sh` â†’ åˆ†ç¦»å¼æ„å»º âœ…
  - `deploy.sh` â†’ å®¹å™¨åæ”¹ä¸ºsite2 âœ…

### Gitå‡†å¤‡
- [ ] **æäº¤æ‰€æœ‰ä¿®æ”¹**
  ```bash
  git status
  git add .
  git commit -m "feat: å‡†å¤‡VPSéƒ¨ç½²åˆ°pixelartland.cc"
  git push origin main
  ```

---

## ğŸ–¥ï¸ VPSç¯å¢ƒæ£€æŸ¥

### åŸºç¡€ç¯å¢ƒ
- [ ] **VPSå·²å®‰è£…Docker**
  ```bash
  docker --version
  # éœ€è¦: Docker 20.10+
  ```

- [ ] **VPSå·²å®‰è£…Docker Compose**
  ```bash
  docker compose version
  # éœ€è¦: v2.0+
  ```

- [ ] **Nginx Proxy Managerå·²è¿è¡Œ**
  ```bash
  docker ps | grep nginx-proxy-manager
  ```

### ç½‘ç»œé…ç½®
- [ ] **webproxyç½‘ç»œå·²åˆ›å»º**
  ```bash
  docker network ls | grep webproxy
  # å¦‚æœæ²¡æœ‰ï¼Œæ‰§è¡Œ: docker network create webproxy
  ```

- [ ] **shared_netç½‘ç»œå·²åˆ›å»º**
  ```bash
  docker network ls | grep shared_net
  # å¦‚æœæ²¡æœ‰ï¼Œæ‰§è¡Œ: docker network create shared_net
  ```

### ç›®å½•å‡†å¤‡
- [ ] **/dockerç›®å½•å·²åˆ›å»º**
  ```bash
  mkdir -p /docker/site2
  cd /docker/site2
  ```

---

## ğŸŒ åŸŸåé…ç½®æ£€æŸ¥

### Cloudflareè®¾ç½®
- [ ] **åŸŸåå·²æ·»åŠ åˆ°Cloudflare**
  - pixelartland.cc âœ…
  - www.pixelartland.cc âœ…

- [ ] **DNSè®°å½•å·²é…ç½®**
  - Aè®°å½•: pixelartland.cc â†’ VPS_IP âœ…
  - CNAMEè®°å½•: www.pixelartland.cc â†’ pixelartland.cc âœ…

- [ ] **åˆå§‹è®¾ç½®ä¸ºç°äº‘â˜ï¸**
  - âš ï¸ ç”³è¯·SSLè¯ä¹¦å‰å¿…é¡»æ˜¯ç°äº‘çŠ¶æ€
  - è¯ä¹¦ç”³è¯·æˆåŠŸåå†åˆ‡æ¢ä¸ºæ©™äº‘ğŸŸ 

---

## ğŸ“ ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡
- [ ] **åˆ›å»ºbackend/.envæ–‡ä»¶**
  ```bash
  cp env.vps.example backend/.env
  nano backend/.env
  ```

- [ ] **é…ç½®ALLOWED_ORIGINS**
  ```bash
  ALLOWED_ORIGINS=https://pixelartland.cc,https://www.pixelartland.cc
  ```

- [ ] **é…ç½®åŸºç¡€å˜é‡**
  ```bash
  NODE_ENV=production
  PORT=3001
  TZ=America/New_York
  ENABLE_DATABASE=false
  ENABLE_REDIS_CACHE=false
  ```

### éªŒè¯é…ç½®
- [ ] **æ£€æŸ¥ç¯å¢ƒå˜é‡æ ¼å¼**
  ```bash
  cat backend/.env | grep ALLOWED_ORIGINS
  # æ ¼å¼ï¼šè‹±æ–‡é€—å·ï¼Œæ— ç©ºæ ¼ï¼Œhttps://
  ```

---

## ğŸš€ éƒ¨ç½²æ‰§è¡Œ

### ä¸Šä¼ ä»£ç 
- [ ] **æ–¹å¼A: Gitå…‹éš†**
  ```bash
  cd /docker
  git clone YOUR_REPO_URL temp
  mv temp/site2/* ./site2/
  rm -rf temp
  ```

- [ ] **æ–¹å¼B: rsyncæ¨é€**
  ```bash
  # æœ¬åœ°æ‰§è¡Œ
  rsync -avz --exclude 'node_modules' \
    ~/Documents/GitHub/Pixel-Art/site2/ \
    root@VPS_IP:/docker/site2/
  ```

### æ‰§è¡Œéƒ¨ç½²
- [ ] **è¿è¡Œéƒ¨ç½²è„šæœ¬**
  ```bash
  cd /docker/site2
  chmod +x build-frontend.sh deploy.sh
  ./deploy.sh
  ```

- [ ] **ç­‰å¾…éƒ¨ç½²å®Œæˆ**
  - é¢„è®¡æ—¶é—´: 10-15åˆ†é’Ÿï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰
  - çœ‹åˆ°"éƒ¨ç½²æˆåŠŸ"æç¤º

---

## ğŸ”§ Nginx Proxy Manageré…ç½®

### ä¸»åŸŸåé…ç½®
- [ ] **æ·»åŠ ä»£ç†ä¸»æœº - pixelartland.cc**
  - Domain Names: `pixelartland.cc`
  - Scheme: `http`
  - Forward Hostname/IP: `site2` æˆ–å®¹å™¨IP
  - Forward Port: `3001`
  - Block Common Exploits: âœ…
  - Websockets Support: âœ…

- [ ] **ç”³è¯·SSLè¯ä¹¦**
  1. ç¡®è®¤Cloudflareæ˜¯ç°äº‘â˜ï¸
  2. åœ¨SSLæ ‡ç­¾ç”³è¯·Let's Encryptè¯ä¹¦
  3. Force SSL: âœ…
  4. ç­‰å¾…è¯ä¹¦ç”³è¯·æˆåŠŸ

### wwwå­åŸŸåé…ç½®
- [ ] **æ·»åŠ ä»£ç†ä¸»æœº - www.pixelartland.cc**
  - Domain Names: `www.pixelartland.cc`
  - å…¶ä»–é…ç½®åŒä¸»åŸŸå
  - SSLè¯ä¹¦ä¹Ÿéœ€è¦å•ç‹¬ç”³è¯·

### Cloudflareåˆ‡æ¢
- [ ] **åˆ‡æ¢ä¸ºæ©™äº‘ğŸŸ **
  - è¯ä¹¦ç”³è¯·æˆåŠŸå
  - ä¸¤ä¸ªåŸŸåéƒ½åˆ‡æ¢ä¸ºæ©™äº‘

---

## âœ… éªŒè¯æµ‹è¯•

### å®¹å™¨çŠ¶æ€
- [ ] **å®¹å™¨æ­£å¸¸è¿è¡Œ**
  ```bash
  docker ps | grep site2
  # çŠ¶æ€åº”è¯¥æ˜¯ Up X minutes (healthy)
  ```

- [ ] **å¥åº·æ£€æŸ¥é€šè¿‡**
  ```bash
  docker exec site2 curl -s http://localhost:3001/api/health
  # è¿”å›: {"status":"ok",...}
  ```

- [ ] **æŸ¥çœ‹æ—¥å¿—æ— é”™è¯¯**
  ```bash
  docker logs site2 --tail 50
  # æ²¡æœ‰ERRORæˆ–WARNçº§åˆ«é”™è¯¯
  ```

### CORSé…ç½®
- [ ] **CORSæ—¥å¿—æ­£ç¡®**
  ```bash
  docker logs site2 | grep "å…è®¸çš„CORSæº"
  # åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªåŸŸå
  ```

### ç½‘ç»œè¿æ¥
- [ ] **webproxyç½‘ç»œå·²è¿æ¥**
  ```bash
  docker network inspect webproxy | grep site2
  ```

- [ ] **shared_netç½‘ç»œå·²è¿æ¥**
  ```bash
  docker network inspect shared_net | grep site2
  ```

### åŸŸåè®¿é—®
- [ ] **ä¸»åŸŸåHTTPè®¿é—®æ­£å¸¸**
  ```bash
  curl -I http://pixelartland.cc
  # åº”è¯¥è¿”å› 301 Redirect to HTTPS
  ```

- [ ] **ä¸»åŸŸåHTTPSè®¿é—®æ­£å¸¸**
  ```bash
  curl -I https://pixelartland.cc
  # åº”è¯¥è¿”å› 200 OK
  ```

- [ ] **wwwåŸŸåHTTPSè®¿é—®æ­£å¸¸**
  ```bash
  curl -I https://www.pixelartland.cc
  # åº”è¯¥è¿”å› 200 OK
  ```

### æµè§ˆå™¨æµ‹è¯•
- [ ] **æ‰“å¼€ä¸»åŸŸå**
  - è®¿é—®: https://pixelartland.cc
  - åŠ è½½æ­£å¸¸ï¼Œæ— æŠ¥é”™
  - ç•Œé¢é»˜è®¤è‹±è¯­
  - SSLè¯ä¹¦æœ‰æ•ˆğŸ”’

- [ ] **æ‰“å¼€wwwåŸŸå**
  - è®¿é—®: https://www.pixelartland.cc
  - åŠ è½½æ­£å¸¸ï¼Œæ— CORSé”™è¯¯
  - åŠŸèƒ½æ­£å¸¸

### åŠŸèƒ½æµ‹è¯•
- [ ] **ä¸Šä¼ å›¾ç‰‡æµ‹è¯•**
  - é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
  - ä¸Šä¼ æˆåŠŸ
  - æ— ç½‘ç»œé”™è¯¯

- [ ] **åƒç´ åŒ–è½¬æ¢æµ‹è¯•**
  - è°ƒæ•´å‚æ•°
  - å®æ—¶é¢„è§ˆæ­£å¸¸
  - è½¬æ¢æˆåŠŸ

- [ ] **ä¸‹è½½å›¾ç‰‡æµ‹è¯•**
  - ç‚¹å‡»ä¸‹è½½æŒ‰é’®
  - æ–‡ä»¶ä¸‹è½½æˆåŠŸ
  - æ ¼å¼æ­£ç¡®ï¼ˆPNG/JPGï¼‰

- [ ] **è¯­è¨€åˆ‡æ¢æµ‹è¯•**
  - åˆ‡æ¢åˆ°ä¸­æ–‡
  - åˆ‡æ¢åˆ°æ—¥è¯­
  - ç•Œé¢ç¿»è¯‘æ­£å¸¸

---

## ğŸ“Š éƒ¨ç½²ç»“æœè®°å½•

### éƒ¨ç½²ä¿¡æ¯
```
éƒ¨ç½²æ—¥æœŸ: ___________
VPS IP: ___________
å®¹å™¨åç§°: site2
å®¹å™¨IP: ___________
```

### åŸŸåé…ç½®
```
ä¸»åŸŸå: https://pixelartland.cc
wwwåŸŸå: https://www.pixelartland.cc
SSLè¯ä¹¦: Let's Encrypt
CDN: Cloudflare (æ©™äº‘ğŸŸ )
```

### æ€§èƒ½æŒ‡æ ‡
```
å®¹å™¨å¯åŠ¨æ—¶é—´: ______ç§’
å¥åº·æ£€æŸ¥å“åº”: ______ms
é¦–å±åŠ è½½æ—¶é—´: ______ç§’
å›¾åƒå¤„ç†æ—¶é—´: ______ç§’
```

---

## ğŸ› å¸¸è§é—®é¢˜å¿«é€Ÿä¿®å¤

### é—®é¢˜1: wwwåŸŸå500é”™è¯¯
```bash
# æ£€æŸ¥CORSé…ç½®
docker logs site2 | grep "CORSé˜»æ­¢"
# ä¿®æ”¹.envæ·»åŠ wwwåŸŸååé‡å¯
docker restart site2
```

### é—®é¢˜2: SSLè¯ä¹¦ç”³è¯·å¤±è´¥
```bash
# ç¡®è®¤Cloudflareæ˜¯ç°äº‘
# ç­‰å¾…5åˆ†é’Ÿåé‡è¯•
# æ£€æŸ¥80ç«¯å£æ˜¯å¦å¼€æ”¾
```

### é—®é¢˜3: å®¹å™¨æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker logs site2 --tail 100
# æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la backend/.env
```

---

## ğŸ“ æ”¯æŒèµ„æº

- **å®Œæ•´éƒ¨ç½²æŒ‡å—**: `VPSéƒ¨ç½²æŒ‡å—_pixelartland.cc.md`
- **é—®é¢˜å¤„ç†æŒ‡å—**: `docs/VPSéƒ¨ç½²é—®é¢˜å¤„ç†æŒ‡å— 1001.md`
- **æ¶æ„è®¾è®¡è§„èŒƒ**: `docs/ä»é›¶æŒ‡å¯¼ç¨‹åºå¼€å‘å»ºè®¾ 1001.md`

---

**æ£€æŸ¥äºº**: ___________  
**æ£€æŸ¥æ—¥æœŸ**: ___________  
**éƒ¨ç½²çŠ¶æ€**: â¬œ æœªå¼€å§‹ / â¬œ è¿›è¡Œä¸­ / â¬œ å·²å®Œæˆ  
**å¤‡æ³¨**: ___________________________________________

